<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>A_building</title>        
    <link rel="stylesheet" href="css/Building.css">
</head>
<style>
  body {
    background-image: url('images/background2.png');
    background-size: cover; /* 배경 이미지가 창에 꽉 채우도록 설정 */
    background-repeat: no-repeat; /* 배경 이미지 반복 없음 */
  }
</style>
<body>
  <nav>
    <ul>
      <li><a href="#">A동 건물</a></li>
      <li><a href="#">My Page</a></li>
      <li><a href="http://127.0.0.1:5500/UI/Home.html">Home</a></li>
      <li><a href="#">About</a></li>
    </ul>   
  </nav>
  <nav class="sub-nav">
    <ul>
      <li><a href="#" id="east">동쪽</a></li>
      <li><a href="#" id="west">서쪽</a></li>
      <li><a href="#" id="south">남쪽</a></li>
      <li><a href="#" id="north">북쪽</a></li>
    </ul>
  </nav>

  <!-- 모달 -->
  <div id="myModal" class="modal">
    <!-- 모달 내용 -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <p id="modal-text"></p>
      <div class="modal-buttons">
        <button id="yes">예</button>
        <button id="no">아니오</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var modal = document.getElementById("myModal");
      var modalText = document.getElementById("modal-text");

      var directions = {
        "east": "동쪽",
        "west": "서쪽",
        "south": "남쪽",
        "north": "북쪽"
      };

      Object.keys(directions).forEach(function(direction) {
        var link = document.getElementById(direction);
        link.addEventListener("click", function(event) {
          event.preventDefault(); // 기본 동작인 링크 이동을 막음
          modalText.textContent = directions[direction] + "에 외관조사망도를 등록하시겠습니까?"; // 모달 텍스트 설정
          modal.style.display = "block"; // 모달 표시
          var yesBtn = document.getElementById("yes");
          yesBtn.onclick = function() {
            // form 데이터 생성
            var formData = new FormData();
            formData.append("direction", directions[direction]);

            // POST 요청으로 데이터 전송
            fetch("http://127.0.0.1:9900/register_wall", {
              method: 'POST',
              body: formData,
            })
            .then(response => {
              if (response.ok) {
                return response.text(); // 텍스트 응답으로 변환
              } else {
                throw new Error('Network response was not ok');
              }
            })
            .then(data => {
              console.log('Success:', data); // 여기서 data는 서버에서 반환한 응답 데이터입니다.
            })
            .catch(error => {
              console.error('Error:', error);
            });

            modal.style.display = "none"; // 모달 숨기기
          };
        });
      });

      // 모달 닫기 버튼 클릭 시 모달 숨기기
      var closeBtn = document.getElementsByClassName("close")[0];
      closeBtn.addEventListener("click", function() {
        modal.style.display = "none";
      });

      // 모달 외부 영역 클릭 시 모달 숨기기
      window.addEventListener("click", function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      });

      // 아니오 버튼 클릭 시 모달 숨기기
      var noBtn = document.getElementById("no");
      noBtn.addEventListener("click", function() {
        modal.style.display = "none";
      });
    });
  </script>
</body>
</html>
